directories:
    daily: daily/
queries:
    active-projects:
        query: object:project .status==active
        description: Active projects
    overdue:
        query: trait:due .value==past
        description: Overdue items
    people:
        query: object:person
        description: All people
    projects:
        query: object:project
        description: All projects
    tasks:
        query: trait:due
        description: All tasks with due dates

workflows:
  person-summary:
    description: "Generate a summary of a person and their related work"
    inputs:
      person_id:
        type: ref
        target: person
        required: true
        description: "The person to summarize"
    steps:
      - id: person
        type: tool
        tool: raven_read
        arguments:
          path: "{{inputs.person_id}}"
          raw: true
      - id: related
        type: tool
        tool: raven_backlinks
        arguments:
          target: "{{inputs.person_id}}"
      - id: compose
        type: agent
        prompt: |
          Summarize the following person based on their profile and related items.
          
          ## Person
          {{steps.person.data.content}}
          
          ## Related Items
          {{steps.related.data.results}}
          
          Generate a brief overview of this person including their role and involvement in projects.

  project-status:
    description: "Review project status and suggest next steps"
    inputs:
      status:
        type: string
        default: "active"
        description: "Filter by project status"
    steps:
      - id: projects
        type: tool
        tool: raven_query
        arguments:
          query_string: "object:project .status=={{inputs.status}}"
      - id: compose
        type: agent
        prompt: |
          Review the following projects and suggest prioritized next steps.
          
          ## Projects
          {{steps.projects.data.results}}
          
          For each project, summarize its current state and recommend immediate actions.

  research:
    description: "Research a topic across the vault"
    inputs:
      question:
        type: string
        required: true
        description: "Research question or topic"
    steps:
      - id: results
        type: tool
        tool: raven_search
        arguments:
          query: "{{inputs.question}}"
          limit: 10
      - id: compose
        type: agent
        prompt: |
          Answer the following question using the search results.
          
          Question: {{inputs.question}}
          
          ## Relevant Content
          {{steps.results.data.results}}
          
          Synthesize the information and provide a comprehensive answer.

  code-review:
    file: workflows/code-review.yaml
